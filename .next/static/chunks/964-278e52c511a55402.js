"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4969:function(r,e,t){var o=t(7437);t(2265),e.Z=r=>{let{className:e=""}=r;return(0,o.jsx)("div",{className:"fixed bottom-4 left-4 pointer-events-none opacity-6 z-0 ".concat(e),style:{width:"300px",height:"300px",backgroundImage:"url(/icons/peace-800.svg)",backgroundSize:"contain",backgroundPosition:"bottom left",backgroundRepeat:"no-repeat",transform:"rotate(-10deg)"}})}},9055:function(r,e,t){t.d(e,{C:function(){return s}});var o=t(7437);t(2265);var n=t(3027),a=t(9354);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(r){let{className:e,variant:t,...n}=r;return(0,o.jsx)("div",{className:(0,a.cn)(i({variant:t}),e),...n})}},8185:function(r,e,t){t.d(e,{Ol:function(){return s},SZ:function(){return u},Zb:function(){return i},aY:function(){return c},eW:function(){return d},ll:function(){return l}});var o=t(7437),n=t(2265),a=t(9354);let i=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("div",{ref:e,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let s=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("div",{ref:e,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});s.displayName="CardHeader";let l=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("h3",{ref:e,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});l.displayName="CardTitle";let u=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("p",{ref:e,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})});u.displayName="CardDescription";let c=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("div",{ref:e,className:(0,a.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent";let d=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("div",{ref:e,className:(0,a.cn)("flex items-center p-6 pt-0",t),...n})});d.displayName="CardFooter"},7209:function(r,e,t){t.d(e,{I:function(){return i}});var o=t(7437),n=t(2265),a=t(9354);let i=n.forwardRef((r,e)=>{let{className:t,type:n,...i}=r;return(0,o.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:e,...i})});i.displayName="Input"},402:function(r,e,t){t.d(e,{_:function(){return u}});var o=t(7437),n=t(2265),a=t(8364),i=t(3027),s=t(9354);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)(a.f,{ref:e,className:(0,s.cn)(l(),t),...n})});u.displayName=a.f.displayName},4919:function(r,e,t){t.d(e,{g:function(){return i}});var o=t(7437),n=t(2265),a=t(9354);let i=n.forwardRef((r,e)=>{let{className:t,...n}=r;return(0,o.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:e,...n})});i.displayName="Textarea"},9630:function(r,e,t){t.d(e,{AuthProvider:function(){return l},a:function(){return u}});var o=t(7437),n=t(2265),a=t(4282),i=t(4316);let s=(0,n.createContext)(void 0);function l(r){let{children:e}=r,[t,l]=(0,n.useState)(null),[u,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{a.e.getCurrentUser().then(r=>{l(r),c(!1)});let{data:{subscription:r}}=i.O.auth.onAuthStateChange(async(r,e)=>{(null==e?void 0:e.user)?l(await a.e.getCurrentUser()):l(null),c(!1)});return()=>r.unsubscribe()},[]);let d=async(r,e)=>{let t=await a.e.signIn({email:r,password:e});return t.error||l(t.user),{error:t.error}},f=async(r,e,t,o)=>{let n=await a.e.signUp({email:r,password:e,firstName:t,lastName:o});return n.error||l(n.user),{error:n.error}},g=async()=>{let r=await a.e.signOut();return r.error||l(null),{error:r.error}},m=async r=>{if(!t)return{error:"No user logged in"};let e=await a.e.updateProfile(t.id,r);return e.error||l({...t,...r}),{error:e.error}};return(0,o.jsx)(s.Provider,{value:{user:t,loading:u,signIn:d,signUp:f,signOut:g,updateProfile:m},children:e})}function u(){let r=(0,n.useContext)(s);if(!r)throw Error("useAuth must be used within an AuthProvider");return r}},4282:function(r,e,t){t.d(e,{e:function(){return n}});var o=t(4316);class n{static async getCurrentUser(){try{let{data:{user:r},error:e}=await o.O.auth.getUser();if(e||!r)return null;let{data:t}=await o.O.from("profiles").select("*").eq("id",r.id).single();return{id:r.id,email:r.email||"",username:null==t?void 0:t.username,full_name:null==t?void 0:t.full_name,avatar_url:null==t?void 0:t.avatar_url,bio:null==t?void 0:t.bio,is_admin:(null==t?void 0:t.is_admin)||!1}}catch(r){return console.error("Error getting current user:",r),null}}static async signUp(r){try{let{data:{user:e},error:t}=await o.O.auth.signUp({email:r.email,password:r.password});if(t||!e)return{user:null,error:(null==t?void 0:t.message)||"Sign up failed"};let{error:n}=await o.O.from("profiles").insert({id:e.id,username:"".concat(r.firstName.toLowerCase()).concat(r.lastName.toLowerCase()),full_name:"".concat(r.firstName," ").concat(r.lastName)});return n&&console.error("Error creating profile:",n),{user:{id:e.id,email:e.email||"",username:"".concat(r.firstName.toLowerCase()).concat(r.lastName.toLowerCase()),full_name:"".concat(r.firstName," ").concat(r.lastName)},error:null}}catch(r){return console.error("Error during sign up:",r),{user:null,error:"An unexpected error occurred"}}}static async signIn(r){try{let{data:{user:e},error:t}=await o.O.auth.signInWithPassword({email:r.email,password:r.password});if(t||!e)return{user:null,error:(null==t?void 0:t.message)||"Sign in failed"};let{data:n}=await o.O.from("profiles").select("*").eq("id",e.id).single();return{user:{id:e.id,email:e.email||"",username:null==n?void 0:n.username,full_name:null==n?void 0:n.full_name,avatar_url:null==n?void 0:n.avatar_url,bio:null==n?void 0:n.bio,is_admin:(null==n?void 0:n.is_admin)||!1},error:null}}catch(r){return console.error("Error during sign in:",r),{user:null,error:"An unexpected error occurred"}}}static async signOut(){try{let{error:r}=await o.O.auth.signOut();return{error:(null==r?void 0:r.message)||null}}catch(r){return console.error("Error during sign out:",r),{error:"An unexpected error occurred"}}}static async updateProfile(r,e){try{let{error:t}=await o.O.from("profiles").update(e).eq("id",r);return{error:(null==t?void 0:t.message)||null}}catch(r){return console.error("Error updating profile:",r),{error:"An unexpected error occurred"}}}static async resetPassword(r){try{let{error:e}=await o.O.auth.resetPasswordForEmail(r);return{error:(null==e?void 0:e.message)||null}}catch(r){return console.error("Error resetting password:",r),{error:"An unexpected error occurred"}}}static async getSession(){try{let{data:{session:r},error:e}=await o.O.auth.getSession();if(e)return console.error("Error getting session:",e),null;return r}catch(r){return console.error("Error getting session:",r),null}}}},7808:function(r,e,t){t.d(e,{T:function(){return n}});var o=t(4316);class n{static async getPhotos(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;try{let t=(r-1)*e,{data:n,error:a}=await o.O.from("photos").select("\n          *,\n          profiles:user_id(username, full_name, avatar_url)\n        ").order("created_at",{ascending:!1}).range(t,t+e-1);if(a)return console.error("Error fetching photos:",a),{photos:[],hasMore:!1};let i=n.length===e;return{photos:n||[],hasMore:i}}catch(r){return console.error("Error fetching photos:",r),{photos:[],hasMore:!1}}}static async getPhoto(r){try{let{data:e,error:t}=await o.O.from("photos").select("\n          *,\n          profiles:user_id(username, full_name, avatar_url)\n        ").eq("id",r).single();if(t)return console.error("Error fetching photo:",t),null;return e}catch(r){return console.error("Error fetching photo:",r),null}}static async uploadPhoto(r,e){try{let t=r.image.name.split(".").pop(),n="".concat(e,"/").concat(Date.now(),".").concat(t),{data:a,error:i}=await o.O.storage.from("photos").upload(n,r.image);if(i)return console.error("Error uploading image:",i),{photo:null,error:i.message};let{data:{publicUrl:s}}=o.O.storage.from("photos").getPublicUrl(n),{data:l,error:u}=await o.O.from("photos").insert({title:r.title,caption:r.caption,image_url:s,image_path:n,tags:r.tags||[],user_id:e,album_id:r.album_id}).select().single();if(u)return console.error("Error creating photo record:",u),{photo:null,error:u.message};return{photo:l,error:null}}catch(r){return console.error("Error uploading photo:",r),{photo:null,error:"An unexpected error occurred"}}}static async deletePhoto(r,e){try{let{data:t}=await o.O.from("photos").select("image_path, user_id").eq("id",r).single();if(!t)return{error:"Photo not found"};if(t.user_id!==e)return{error:"Unauthorized"};let{error:n}=await o.O.storage.from("photos").remove([t.image_path]);n&&console.error("Error deleting from storage:",n);let{error:a}=await o.O.from("photos").delete().eq("id",r);if(a)return console.error("Error deleting photo:",a),{error:a.message};return{error:null}}catch(r){return console.error("Error deleting photo:",r),{error:"An unexpected error occurred"}}}static async getAlbums(){try{let{data:r,error:e}=await o.O.from("albums").select("\n          *,\n          categories:category_id(name),\n          cover_photo:cover_photo_id(image_url)\n        ").order("created_at",{ascending:!1});if(e)return console.error("Error fetching albums:",e),[];return r||[]}catch(r){return console.error("Error fetching albums:",r),[]}}static async getAlbum(r){try{let{data:e,error:t}=await o.O.from("albums").select("\n          *,\n          categories:category_id(name),\n          cover_photo:cover_photo_id(image_url)\n        ").eq("id",r).single();if(t)return console.error("Error fetching album:",t),{album:null,photos:[]};let{data:n,error:a}=await o.O.from("photos").select("\n          *,\n          profiles:user_id(username, full_name, avatar_url)\n        ").eq("album_id",r).order("created_at",{ascending:!1});if(a)return console.error("Error fetching album photos:",a),{album:e,photos:[]};return{album:e,photos:n||[]}}catch(r){return console.error("Error fetching album:",r),{album:null,photos:[]}}}static async createAlbum(r,e,t){try{let{data:n,error:a}=await o.O.from("albums").insert({title:r,description:e,user_id:t}).select().single();if(a)return console.error("Error creating album:",a),{album:null,error:a.message};return{album:n,error:null}}catch(r){return console.error("Error creating album:",r),{album:null,error:"An unexpected error occurred"}}}static async getCategories(){try{let{data:r,error:e}=await o.O.from("categories").select("*").order("name");if(e)return console.error("Error fetching categories:",e),[];return r||[]}catch(r){return console.error("Error fetching categories:",r),[]}}static async toggleLike(r,e){try{let{data:t}=await o.O.from("likes").select("id").eq("photo_id",r).eq("user_id",e).single();if(t){let{error:t}=await o.O.from("likes").delete().eq("photo_id",r).eq("user_id",e);if(t)return console.error("Error unliking photo:",t),{error:t.message}}else{let{error:t}=await o.O.from("likes").insert({photo_id:r,user_id:e});if(t)return console.error("Error liking photo:",t),{error:t.message}}return{error:null}}catch(r){return console.error("Error toggling like:",r),{error:"An unexpected error occurred"}}}static async isLiked(r,e){try{let{data:t}=await o.O.from("likes").select("id").eq("photo_id",r).eq("user_id",e).single();return!!t}catch(r){return!1}}}},4316:function(r,e,t){t.d(e,{O:function(){return o}});let o=(0,t(34).eI)("https://qjrysayswbdqskynywkr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFqcnlzYXlzd2JkcXNreW55d2tyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyNzkwNDgsImV4cCI6MjA2ODg1NTA0OH0.feYjlWxRpKk3q7Lp9fKMSv7Om5YKi0OLOIqelRF5pCA")}}]);