(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{341:function(e,t,a){Promise.resolve().then(a.bind(a,6276))},6276:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ea}});var s=a(7437),l=a(2265),i=a(6214),r=a(3907),n=a(1863),o=a(8604),d=a(404),c=a(4817),m=a(4775),u=a(5574),x=a(2513),h=a(5188),p=a(9451),f=a(883),g=a(233),j=a(2022),b=a(4241),v=a(5733),N=a(1266),y=a(8184),w=a(4042),_=a(7390),C=a(1510),k=a(9733),z=a(8185),Z=a(9055),D=a(7209),E=a(1590),S=a(3304),R=a(4697),F=a(9354);let V=S.fC;S.xz;let A=S.h_;S.x8;let L=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(S.aV,{ref:t,className:(0,F.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});L.displayName=S.aV.displayName;let T=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(A,{children:[(0,s.jsx)(L,{}),(0,s.jsxs)(S.VY,{ref:t,className:(0,F.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[l,(0,s.jsxs)(S.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(R.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});T.displayName=S.VY.displayName;let Y=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,F.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};Y.displayName="DialogHeader";let O=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,F.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};O.displayName="DialogFooter";let P=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(S.Dx,{ref:t,className:(0,F.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});P.displayName=S.Dx.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(S.dk,{ref:t,className:(0,F.cn)("text-sm text-muted-foreground",a),...l})}).displayName=S.dk.displayName;var U=a(4919),X=a(402),B=a(2447);let W=B.fC,q=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(B.aV,{ref:t,className:(0,F.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});q.displayName=B.aV.displayName;let I=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(B.xz,{ref:t,className:(0,F.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});I.displayName=B.xz.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(B.VY,{ref:t,className:(0,F.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})}).displayName=B.VY.displayName;var $=a(4969),H=a(4715),M=a(9630),G=a(7808),J=a(6463);let K={hidden:{opacity:0,y:30},visible:{opacity:1,y:0}},Q={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},ee=e=>{let{photo:t}=e,{user:a}=(0,M.a)(),[r,n]=(0,l.useState)(!1),[o,d]=(0,l.useState)(t.likes_count),c=async()=>{if(!a)return;let e=!r;n(e),d(e?o+1:o-1),await G.T.toggleLike(t.id,a.id)};return(0,s.jsxs)(i.E.div,{variants:K,className:"group relative overflow-hidden rounded-xl bg-card border border-border hover:shadow-lg transition-all duration-300",children:[(0,s.jsx)("div",{className:"aspect-square overflow-hidden",children:(0,s.jsx)("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg mb-1",children:t.title}),t.caption&&(0,s.jsx)("p",{className:"text-sm text-gray-200 mb-3",children:t.caption}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(k.z,{variant:"ghost",size:"sm",onClick:c,className:"text-white hover:text-red-400",children:[(0,s.jsx)(w.Z,{className:"h-4 w-4 mr-1 ".concat(r?"fill-red-400 text-red-400":"")}),o]}),(0,s.jsxs)(k.z,{variant:"ghost",size:"sm",className:"text-white hover:text-blue-400",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4 mr-1"}),t.comments_count]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(k.z,{variant:"ghost",size:"sm",className:"text-white hover:text-green-400",children:(0,s.jsx)(C.Z,{className:"h-4 w-4"})})})]})]})}),t.tags&&t.tags.length>0&&(0,s.jsx)("div",{className:"absolute top-2 left-2 flex flex-wrap gap-1",children:t.tags.slice(0,3).map((e,t)=>(0,s.jsx)(Z.C,{variant:"secondary",className:"text-xs",children:e},t))})]})},et=e=>{let{onSubmit:t,onCancel:a,initialData:i,mode:r="create"}=e,{t:n}=(0,H.Z)(),[o,d]=(0,l.useState)({title:(null==i?void 0:i.title)||"",description:(null==i?void 0:i.description)||""});return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(o)},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(X._,{htmlFor:"title",children:n("gallery.album_title")}),(0,s.jsx)(D.I,{id:"title",value:o.title,onChange:e=>d(t=>({...t,title:e.target.value})),placeholder:n("gallery.album_title_placeholder"),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(X._,{htmlFor:"description",children:n("gallery.album_description")}),(0,s.jsx)(U.g,{id:"description",value:o.description,onChange:e=>d(t=>({...t,description:e.target.value})),placeholder:n("gallery.album_description_placeholder"),rows:3})]}),(0,s.jsxs)(O,{children:[(0,s.jsx)(k.z,{type:"button",variant:"outline",onClick:a,children:n("common.cancel")}),(0,s.jsx)(k.z,{type:"submit",children:n("create"===r?"gallery.create_album":"gallery.update_album")})]})]})};var ea=()=>{let{t:e}=(0,H.Z)(),{user:t}=(0,M.a)(),a=(0,J.useRouter)(),[w,_]=(0,l.useState)([]),[C,S]=(0,l.useState)(null),[R,F]=(0,l.useState)(!0),[A,L]=(0,l.useState)(null),[O,U]=(0,l.useState)("grid"),[X,B]=(0,l.useState)(""),[ea,es]=(0,l.useState)("all"),[el,ei]=(0,l.useState)(!1),[er,en]=(0,l.useState)(!1),[eo,ed]=(0,l.useState)(null),[ec,em]=(0,l.useState)("albums"),eu=(0,l.useCallback)(async()=>{F(!0),L(null);try{let e=await G.T.getAlbums();if(e&&0!==e.length){let t=e.map(e=>({...e,photo_count:0,photos:[],cover_image:e.cover_photo_id?e.cover_photo_id:null}));_(t)}else{console.log("No albums found, creating default albums..."),await ex();let e=await G.T.getAlbums();if(!e||0===e.length){L("No albums available."),F(!1);return}let t=e.map(e=>({...e,photo_count:0,photos:[],cover_image:e.cover_photo_id?e.cover_photo_id:null}));_(t)}}catch(e){console.error("Error fetching albums and photos:",e),L("Failed to load albums/photos"),_([])}finally{F(!1)}},[]);(0,l.useEffect)(()=>{eu()},[eu]);let ex=async()=>{try{for(let e of[{title:"Nature & Landscape",description:"Breathtaking landscapes, wildlife, and natural wonders captured in their purest form.",is_featured:!0},{title:"Portrait & People",description:"Intimate portraits and candid moments that capture the human spirit.",is_featured:!0},{title:"Street Photography",description:"Urban life captured through the lens. Street scenes and city architecture.",is_featured:!1},{title:"Architecture & Design",description:"Stunning architectural marvels and modern buildings.",is_featured:!1},{title:"Abstract & Artistic",description:"Creative expressions and abstract compositions.",is_featured:!1},{title:"Minimal & Clean",description:"Less is more. Clean lines and minimalist aesthetics.",is_featured:!1},{title:"Black & White",description:"Timeless monochrome photography with powerful visual impact.",is_featured:!0},{title:"Color & Vibrant",description:"Bold, colorful compositions that celebrate the full spectrum of life.",is_featured:!1}]){let t=await G.T.createAlbum(e.title,e.description);t.error&&console.error("Error creating album:",e.title,t.error)}console.log("Default albums created successfully")}catch(e){console.error("Error creating default albums:",e)}},eh=async e=>{if(!t){a.push("/login");return}try{let t=await G.T.createAlbum(e.title.trim(),e.description.trim());if(t.error)throw Error(t.error);eu(),ei(!1)}catch(e){console.error("Error creating album:",e)}},ep=async e=>{if(eo)try{eu(),en(!1),ed(null)}catch(e){console.error("Error updating album:",e)}},ef=async e=>{if(t)try{eu()}catch(e){console.error("Error deleting album:",e)}},eg=e=>{S(e)},ej=()=>{S(null)},eb=e=>{let t=e.toLowerCase();return t.includes("nature")?"\uD83C\uDF3F":t.includes("portrait")?"\uD83D\uDC64":t.includes("street")?"\uD83C\uDFD9️":t.includes("architecture")?"\uD83C\uDFDB️":t.includes("abstract")?"\uD83C\uDFA8":t.includes("minimal")?"⚪":t.includes("black")?"⚫":t.includes("color")?"\uD83C\uDF08":"\uD83D\uDCF8"},ev=(null==w?void 0:w.filter(e=>{let a=e.title.toLowerCase().includes(X.toLowerCase())||e.description&&e.description.toLowerCase().includes(X.toLowerCase());return"my-albums"===ea&&t?a&&e.user_id===t.id:"featured"===ea?a&&e.is_featured:a}))||[],eN=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return R?(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground pt-24",children:[(0,s.jsx)($.Z,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"bg-muted aspect-square rounded-lg mb-3"}),(0,s.jsx)("div",{className:"h-4 bg-muted rounded mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-muted rounded w-1/3"})]},t))})})]}):A?(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground pt-24",children:[(0,s.jsx)($.Z,{}),(0,s.jsx)("div",{className:"flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-muted-foreground text-lg mb-4",children:A}),(0,s.jsx)(k.z,{onClick:eu,children:"Try Again"})]})})]}):C?(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground relative",children:[(0,s.jsx)($.Z,{}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-24",children:[(0,s.jsxs)(i.E.div,{className:"mb-8",initial:"hidden",animate:"visible",variants:K,children:[(0,s.jsxs)(k.z,{variant:"ghost",onClick:ej,className:"mb-6 flex items-center gap-2 hover:bg-muted/50",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4"}),e("gallery.back_to_albums")]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 mb-8",children:[(0,s.jsx)("div",{className:"text-6xl",children:eb(C.title)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-4",children:C.title}),C.description&&(0,s.jsx)("p",{className:"text-xl text-muted-foreground leading-relaxed",children:C.description})]}),t&&C.user_id===t.id&&(0,s.jsxs)(E.h_,{children:[(0,s.jsx)(E.$F,{asChild:!0,children:(0,s.jsx)(k.z,{variant:"ghost",size:"sm",children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})})}),(0,s.jsxs)(E.AW,{children:[(0,s.jsxs)(E.Xi,{onClick:()=>{ed(C),en(!0)},children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),e("gallery.edit_album")]}),(0,s.jsx)(E.VD,{}),(0,s.jsxs)(E.Xi,{onClick:()=>{confirm(e("gallery.delete_confirm"))&&(ef(C.id),ej())},className:"text-destructive",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),e("gallery.delete_album")]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)(Z.C,{variant:"secondary",className:"text-sm",children:[(0,s.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),C.photo_count," ",e("gallery.photos_in_collection")]}),C.user_id&&(0,s.jsxs)(Z.C,{variant:"outline",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),e("gallery.personal_album")]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(k.z,{variant:"grid"===O?"default":"ghost",size:"sm",onClick:()=>U("grid"),children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"list"===O?"default":"ghost",size:"sm",onClick:()=>U("list"),children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})]})]}),0===C.photos.length?(0,s.jsxs)(i.E.div,{className:"text-center py-16",initial:"hidden",animate:"visible",variants:K,children:[(0,s.jsx)("div",{className:"text-muted-foreground text-xl mb-4",children:e("gallery.no_photos_yet")}),(0,s.jsx)("div",{className:"text-muted-foreground mb-8",children:e("gallery.photos_will_appear")}),t&&(0,s.jsxs)(k.z,{size:"lg",onClick:()=>a.push("/upload"),children:[(0,s.jsx)(y.Z,{className:"w-5 h-5 mr-2"}),e("gallery.upload_first_photo")]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.photos.map(e=>(0,s.jsx)(ee,{photo:e},e.id))})]}),eo&&(0,s.jsx)(V,{open:er,onOpenChange:en,children:(0,s.jsxs)(T,{children:[(0,s.jsx)(Y,{children:(0,s.jsx)(P,{children:e("gallery.edit_album")})}),(0,s.jsx)(et,{onSubmit:ep,onCancel:()=>{en(!1),ed(null)},initialData:{title:eo.title,description:eo.description||""},mode:"edit"})]})})]})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-background text-foreground relative",children:[(0,s.jsx)($.Z,{}),(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("section",{className:"pt-24 pb-16 bg-gradient-to-br from-primary/5 via-secondary/5 to-background",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)(i.E.div,{className:"text-center max-w-4xl mx-auto",initial:"hidden",animate:"visible",variants:Q,children:[(0,s.jsx)(i.E.div,{variants:K,className:"mb-6",children:(0,s.jsxs)(Z.C,{variant:"secondary",className:"mb-4 text-sm",children:[(0,s.jsx)(r.Z,{className:"w-3 h-3 mr-1"}),e("gallery.curated_collections")]})}),(0,s.jsx)(i.E.h1,{variants:K,className:"text-4xl md:text-6xl font-bold bg-gradient-to-r from-primary via-secondary to-primary bg-clip-text text-transparent mb-6 leading-tight",children:e("gallery.explore_title")}),(0,s.jsx)(i.E.p,{variants:K,className:"text-xl text-muted-foreground mb-8 leading-relaxed max-w-2xl mx-auto",children:e("gallery.explore_desc")})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 pb-16",children:[(0,s.jsx)(i.E.div,{className:"mb-8",initial:"hidden",animate:"visible",variants:K,children:(0,s.jsx)(W,{value:ec,onValueChange:e=>em(e),children:(0,s.jsxs)(q,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(I,{value:"albums",className:"flex items-center gap-2",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4"}),e("gallery.albums")]}),(0,s.jsxs)(I,{value:"photos",className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4"}),e("gallery.all_photos")]})]})})}),(0,s.jsx)(i.E.div,{className:"mb-12",initial:"hidden",animate:"visible",variants:K,children:(0,s.jsxs)(z.Zb,{className:"overflow-hidden hover-lift rounded-2xl border-border",children:[(0,s.jsxs)(z.Ol,{className:"pb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-primary"}),(0,s.jsx)(z.ll,{className:"text-lg sm:text-2xl",children:e("gallery.find_collection")})]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:e("gallery.search_filter_desc")})]}),(0,s.jsx)(z.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,s.jsx)(D.I,{placeholder:e("gallery.search_albums"),value:X,onChange:e=>B(e.target.value),className:"pl-10"})]}),(0,s.jsx)(W,{value:ea,onValueChange:e=>es(e),children:(0,s.jsxs)(q,{className:"grid w-full grid-cols-3",children:[(0,s.jsx)(I,{value:"all",children:e("gallery.all_albums")}),(0,s.jsx)(I,{value:"featured",children:e("gallery.featured")}),t&&(0,s.jsx)(I,{value:"my-albums",children:e("gallery.my_albums")})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(k.z,{variant:"grid"===O?"default":"ghost",size:"sm",onClick:()=>U("grid"),children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"list"===O?"default":"ghost",size:"sm",onClick:()=>U("list"),children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]}),t&&(0,s.jsxs)(k.z,{className:"flex items-center gap-2",onClick:()=>ei(!0),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4"}),e("gallery.create_album")]})]})})]})}),0===ev.length?(0,s.jsxs)(i.E.div,{className:"text-center py-12",initial:"hidden",animate:"visible",variants:K,children:[(0,s.jsx)("div",{className:"text-muted-foreground text-lg mb-4",children:X?e("gallery.no_albums_search"):e("gallery.no_albums")}),(0,s.jsx)("div",{className:"text-muted-foreground",children:X?e("gallery.try_different_search"):e("gallery.check_back_later")})]}):(0,s.jsx)(i.E.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",initial:"hidden",animate:"visible",variants:Q,children:ev.map((a,l)=>(0,s.jsx)(i.E.div,{variants:K,whileHover:{y:-5},transition:{duration:.2},children:(0,s.jsxs)(z.Zb,{className:"group cursor-pointer overflow-hidden hover-lift rounded-2xl border-border transition-all duration-300 hover:shadow-xl",onClick:()=>eg(a),children:[(0,s.jsxs)("div",{className:"aspect-[4/3] overflow-hidden bg-muted relative",children:[a.cover_image?(0,s.jsx)("img",{src:a.cover_image,alt:a.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-secondary/10",children:(0,s.jsx)("span",{className:"text-6xl",children:eb(a.title)})}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),(0,s.jsx)("div",{className:"absolute top-4 right-4",children:(0,s.jsxs)(E.h_,{children:[(0,s.jsx)(E.$F,{asChild:!0,children:(0,s.jsx)(k.z,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity bg-black/20 hover:bg-black/40 text-white",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(h.Z,{className:"w-4 h-4"})})}),(0,s.jsxs)(E.AW,{children:[(0,s.jsxs)(E.Xi,{onClick:e=>{e.stopPropagation(),ed(a),en(!0)},children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),e("gallery.edit_album")]}),t&&a.user_id===t.id&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.VD,{}),(0,s.jsxs)(E.Xi,{onClick:t=>{t.stopPropagation(),confirm(e("gallery.delete_confirm"))&&ef(a.id)},className:"text-destructive",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),e("gallery.delete_album")]})]})]})]})}),(0,s.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsxs)(Z.C,{variant:"secondary",children:[(0,s.jsx)(g.Z,{className:"w-3 h-3 mr-1"}),a.photo_count," ",e("gallery.photos")]}),a.user_id&&(0,s.jsxs)(Z.C,{variant:"outline",children:[(0,s.jsx)(j.Z,{className:"w-3 h-3 mr-1"}),e("gallery.personal")]})]})})]}),(0,s.jsxs)(z.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-foreground line-clamp-1 flex-1",children:a.title}),(0,s.jsx)("span",{className:"text-3xl ml-3",children:eb(a.title)})]}),a.description&&(0,s.jsx)("p",{className:"text-muted-foreground text-sm line-clamp-2 mb-4",children:a.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:a.created_at&&(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.Z,{className:"w-3 h-3"}),eN(a.created_at)]})}),(0,s.jsx)(k.z,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(v.Z,{className:"w-4 h-4"})})]})]})]})},a.id))})]})]}),(0,s.jsx)(V,{open:el,onOpenChange:ei,children:(0,s.jsxs)(T,{children:[(0,s.jsx)(Y,{children:(0,s.jsx)(P,{children:e("gallery.create_new_album")})}),(0,s.jsx)(et,{onSubmit:eh,onCancel:()=>ei(!1)})]})}),eo&&(0,s.jsx)(V,{open:er,onOpenChange:en,children:(0,s.jsxs)(T,{children:[(0,s.jsx)(Y,{children:(0,s.jsx)(P,{children:e("gallery.edit_album")})}),(0,s.jsx)(et,{onSubmit:ep,onCancel:()=>{en(!1),ed(null)},initialData:{title:eo.title,description:eo.description||""},mode:"edit"})]})})]})}},1590:function(e,t,a){"use strict";a.d(t,{$F:function(){return m},AW:function(){return u},VD:function(){return h},Xi:function(){return x},h_:function(){return c}});var s=a(7437),l=a(2265),i=a(6047),r=a(7592),n=a(2468),o=a(8165),d=a(9354);let c=i.fC,m=i.xz;i.ZA,i.Uv,i.Tr,i.Ee,l.forwardRef((e,t)=>{let{className:a,inset:l,children:n,...o}=e;return(0,s.jsxs)(i.fF,{ref:t,className:(0,d.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",a),...o,children:[n,(0,s.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=i.fF.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.tu,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=i.tu.displayName;let u=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,s.jsx)(i.Uv,{children:(0,s.jsx)(i.VY,{ref:t,sideOffset:l,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});u.displayName=i.VY.displayName;let x=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(i.ck,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...r})});x.displayName=i.ck.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:r,...o}=e;return(0,s.jsxs)(i.oC,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...o,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.wU,{children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})}),l]})}).displayName=i.oC.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(i.Rk,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.wU,{children:(0,s.jsx)(o.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=i.Rk.displayName,l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(i.__,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...r})}).displayName=i.__.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});h.displayName=i.Z0.displayName}},function(e){e.O(0,[327,34,20,264,980,964,971,23,744],function(){return e(e.s=341)}),_N_E=e.O()}]);