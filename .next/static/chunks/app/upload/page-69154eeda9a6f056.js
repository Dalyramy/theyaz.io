(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{5752:function(e,t,a){Promise.resolve().then(a.bind(a,6992))},233:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},8604:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},3907:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},8184:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},4697:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(8030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},6992:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(7437),l=a(2265),s=a(6214),i=a(8185),n=a(9733),o=a(7209),d=a(402),c=a(4919),u=a(9055),h=a(3907),p=a(4697),m=a(8604),x=a(8184);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,a(8030).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var v=a(233),g=a(4969),y=a(4715),j=a(9630),b=a(7808),N=a(6463);let k={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function w(){let{t:e}=(0,y.Z)(),{user:t}=(0,j.a)(),a=(0,N.useRouter)(),w=(0,l.useRef)(null),[Z,_]=(0,l.useState)({title:"",caption:"",tags:""}),[P,M]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[z,R]=(0,l.useState)(!1),[F,A]=(0,l.useState)("");if(!t)return a.push("/login"),null;let L=e=>{let{name:t,value:a}=e.target;_(e=>({...e,[t]:a}))},D=async e=>{if(e.preventDefault(),!P){A("Please select an image");return}if(!Z.title.trim()){A("Please enter a title");return}R(!0),A("");try{let e=Z.tags.split(",").map(e=>e.trim()).filter(e=>e.length>0),r=await b.T.uploadPhoto({title:Z.title,caption:Z.caption,image:P,tags:e.length>0?e:void 0},t.id);r.error?A(r.error):a.push("/gallery")}catch(e){A("An unexpected error occurred")}finally{R(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-background text-foreground pt-24",children:[(0,r.jsx)(g.Z,{}),(0,r.jsx)("main",{className:"container mx-auto py-6 px-4",children:(0,r.jsx)(s.E.div,{initial:"hidden",animate:"visible",variants:k,transition:{duration:.6},className:"max-w-2xl mx-auto",children:(0,r.jsxs)(i.Zb,{className:"overflow-hidden hover-lift rounded-2xl border-border",children:[(0,r.jsxs)(i.Ol,{className:"text-center pb-6",children:[(0,r.jsxs)(u.C,{variant:"secondary",className:"mb-4",children:[(0,r.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),e("upload.share_work","Share Your Work")]}),(0,r.jsx)(i.ll,{className:"text-2xl sm:text-3xl font-bold mb-2",children:e("upload.title","Upload Photo")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e("upload.description","Share your photography with the community")})]}),(0,r.jsxs)(i.aY,{className:"space-y-6",children:[F&&(0,r.jsx)("div",{className:"text-red-500 text-sm text-center p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:F}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(d._,{htmlFor:"photo",children:e("upload.select_photo","Select Photo")}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center hover:border-primary/50 transition-colors",children:[S?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:S,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"}),(0,r.jsx)(n.z,{type:"button",variant:"destructive",size:"sm",onClick:()=>{M(null),C(null),w.current&&(w.current.value="")},className:"absolute top-2 right-2",children:(0,r.jsx)(p.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:(0,r.jsx)(m.Z,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e("upload.drag_drop","Drag and drop your image here, or click to browse")}),(0,r.jsxs)(n.z,{type:"button",variant:"outline",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),e("upload.browse","Browse Files")]})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e("upload.file_types","PNG, JPG, GIF up to 5MB")})]}),(0,r.jsx)("input",{ref:w,type:"file",id:"photo",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(!a.type.startsWith("image/")){A("Please select an image file");return}if(a.size>5242880){A("File size must be less than 5MB");return}M(a),A("");let e=new FileReader;e.onload=e=>{var t;C(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(a)}},className:"hidden","aria-label":"Select photo file"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d._,{htmlFor:"title",children:[e("upload.photo_title","Photo Title")," *"]}),(0,r.jsx)(o.I,{id:"title",name:"title",value:Z.title,onChange:L,placeholder:e("upload.title_placeholder","Enter a descriptive title..."),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d._,{htmlFor:"caption",children:e("upload.caption","Caption")}),(0,r.jsx)(c.g,{id:"caption",name:"caption",value:Z.caption,onChange:L,placeholder:e("upload.caption_placeholder","Tell the story behind this photo..."),rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(d._,{htmlFor:"tags",children:[(0,r.jsx)(f,{className:"h-4 w-4 inline mr-1"}),e("upload.tags","Tags")]}),(0,r.jsx)(o.I,{id:"tags",name:"tags",value:Z.tags,onChange:L,placeholder:e("upload.tags_placeholder","nature, landscape, sunset (comma separated)")}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e("upload.tags_help","Add tags to help others discover your photo")})]}),(0,r.jsx)(n.z,{type:"submit",className:"w-full",disabled:z||!P||!Z.title.trim(),children:z?(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e("upload.uploading","Uploading...")]}):(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),e("upload.upload_photo","Upload Photo")]})})]})]})]})})})]})}},8364:function(e,t,a){"use strict";a.d(t,{f:function(){return n}});var r=a(2265),l=a(5171),s=a(7437),i=r.forwardRef((e,t)=>(0,s.jsx)(l.WV.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null===(a=e.onMouseDown)||void 0===a||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=i},5171:function(e,t,a){"use strict";a.d(t,{WV:function(){return n},jH:function(){return o}});var r=a(2265),l=a(4887),s=a(1538),i=a(7437),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,s.Z8)(`Primitive.${t}`),l=r.forwardRef((e,r)=>{let{asChild:l,...s}=e,n=l?a:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n,{...s,ref:r})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{});function o(e,t){e&&l.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[327,34,980,964,971,23,744],function(){return e(e.s=5752)}),_N_E=e.O()}]);